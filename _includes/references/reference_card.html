<!-- Usage: {% include references/reference_card.html reference=reference %} -->

<article class="reference-card" data-year="{{ include.reference.year }}" data-type="{{ include.reference.type }}">
    <div class="reference-header">
        <div class="reference-type-badge type-{{ include.reference.type }}">
            {{ include.reference.type | capitalize }}
        </div>
        {% if include.reference.year %}
        <div class="reference-year">{{ include.reference.year }}</div>
        {% endif %}
    </div>

    <div class="reference-content">
        <h3 class="reference-title">
            {% if include.reference.url %}
            <a href="{{ include.reference.url }}" target="_blank" rel="noopener">{{ include.reference.title }}</a>
            {% else %}
            {{ include.reference.title }}
            {% endif %}
        </h3>

        <div class="reference-authors">
            {{ include.reference.authors }}
        </div>

        {% if include.reference.publication %}
        <div class="reference-publication">
            {{ include.reference.publication }}
        </div>
        {% endif %}

        {% if include.reference.description %}
        <p class="reference-description">{{ include.reference.description }}</p>
        {% endif %}

        {% if include.reference.topics %}
        <div class="reference-topics">
            {% for topic in include.reference.topics %}
            <span class="topic-tag">{{ topic }}</span>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    {% if include.reference.url or include.reference.doi or include.reference.isbn %}
    <div class="reference-footer">
        <div class="reference-links">
            {% if include.reference.url %}
            <a href="{{ include.reference.url }}" target="_blank" rel="noopener" class="reference-link">
                📄 Read
            </a>
            {% endif %}
            {% if include.reference.doi %}
            <a href="https://doi.org/{{ include.reference.doi }}" target="_blank" rel="noopener" class="reference-link">
                🔗 DOI
            </a>
            {% endif %}
            {% if include.reference.isbn %}
            <span class="reference-isbn">ISBN: {{ include.reference.isbn }}</span>
            {% endif %}
        </div>
    </div>
    {% endif %}
</article>